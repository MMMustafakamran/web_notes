# Introduction to Node.js

## What is Node.js?
- Node.js is a powerful JavaScript-based platform built on Google Chrome's V8 JavaScript engine.
- It is used to develop I/O-intensive web applications like video streaming sites, single-page applications, and more.
- It is open source, free, and widely used by developers worldwide.
- As an asynchronous, event-driven JavaScript runtime, Node.js is designed for building scalable network applications.
- Node.js is single-threaded, unlike traditional multi-threaded web servers like Apache or IIS.
- This single-threaded model simplifies development, and for performance, you can run multiple Node instances.
- Node.js is platform-independent.
- It allows JavaScript to run on the server, enabling frameworks like Express.
- Node.js is considered a full-stack JavaScript solution, serving both client and server-side.
- This can reduce the need for separate frontend and backend developers, saving time and money.

## Advantages of Node.js
- Large, active developer community continuously contributing to its growth.
- Strong support from JavaScript developers with ready-made solutions and code on GitHub.
- Open-source runtime with module caching: the first requested module is cached in memory.
- npm (Node Package Manager) for managing dependencies and Grunt for task automation.
- Node.js = Runtime Environment + JavaScript Library.

## Installing Node.js
### Steps:
1. Visit [Node.js download page](https://nodejs.org/en/download/).
2. For Windows and macOS: use the installer.
3. For Linux: use a package manager for quicker setup.
4. Standalone installers are available for organizational distribution.
5. For building from source, refer to official instructions.

### Node Version Manager (nvm)
- Recommended method for installing Node.js and npm.
- Allows multiple versions of Node.js and npm to coexist.
- Switch between versions without uninstalling.
- Great for compatibility testing and environment management.
- For Windows: alternatives include `nvm-windows` and `nodist`.

### Installing nvm
Run the installation command:
```bash
curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.39.0/install.sh | bash
```
Verify installation:
```bash
nvm --version
```
Install Node.js LTS version:
```bash
nvm install --lts
```
Verify Node.js and npm:
```bash
node -v
npm -v
```

## Installing VS Code
- Free, open-source editor with a large extension ecosystem.
- Built on Electron, which uses Node.js.
- Installation instructions available for Windows and Linux.
- Integrates with Node.js to run code directly.

## NPM (Node Package Manager)
- Key to Node.js's success, allowing easy sharing of packages like lodash and moment.
- Consists of:
  - CLI tool for publishing/downloading packages.
  - Online repository for JavaScript packages.

### package.json
- Metadata file for JavaScript/Node.js projects.
- Created via `npm init`.
- Contains:
  - `name`: project name
  - `version`: project version
  - `description`: project description
  - `license`: project license

### npm Scripts
- Defined in `package.json` to run CLI tools locally.
- Example:
```json
{
  "scripts": {
    "build": "tsc",
    "format": "prettier --write 'src/**/*.ts'",
    "format-check": "prettier --check 'src/**/*.ts'",
    "lint": "eslint src/**/*.ts",
    "pack": "ncc build",
    "test": "jest",
    "all": "npm run build && npm run format && npm run lint && npm run pack && npm test"
  }
}
```
- Use `npx` to run locally installed tools: `npx prettier --write 'src/**/*.ts'`.

### Dependencies
- `dependencies`: for production.
- `devDependencies`: for development/testing.
- Example:
```json
{
  "dependencies": {
    "@actions/core": "^1.2.3",
    "@actions/github": "^2.1.1"
  },
  "devDependencies": {
    "@types/jest": "^25.1.4",
    "@types/node": "^13.9.0",
    "@typescript-eslint/parser": "^2.22.0",
    "eslint": "^6.8.0",
    "jest": "^25.1.0",
    "typescript": "^3.8.3"
  }
}
```
- Install with `npm install --save` (production) or `npm install --save-dev` (development).

### package-lock.json
- Records exact dependency versions for reproducible builds.
- Generated by `npm install`.
- Read by `npm ci` for consistent environments.

### npm install
- Installs latest package versions by default with `^` or `~`.
- `-g` flag installs globally (e.g., `npm install -g live-server`).
- `--production` flag installs only production dependencies.

### npm ci
- Installs exact versions from `package-lock.json`.
- Ensures consistency across machines and CI environments.

### npm audit
- Checks for security vulnerabilities in dependencies.
- `npm audit fix` upgrades packages to safe versions.

## Node.js Web Server Model
### Traditional Model
- Each request handled by a dedicated thread from a thread pool.
- If no thread is available, the request waits.
- Thread returns to pool only after completing the request.

### Node.js Model
- Single-threaded, event-driven architecture.
- Handles multiple requests asynchronously without blocking.
- Uses an event loop to manage asynchronous tasks.
- I/O operations are delegated to internal C++ thread pool (libuv).
- Not suitable for CPU-intensive tasks (e.g., image processing), as they block the single thread.

### Event Loop
- Allows non-blocking I/O in single-threaded JavaScript.
- Continuously checks for completed async tasks and executes callbacks.
- Example:
```javascript
console.log("This is the first statement");

setTimeout(function() {
  console.log("This is the second statement");
}, 1000);

console.log("This is the third statement");
```
**Output:**
```
This is the first statement
This is the third statement
This is the second statement
```
- Uses libuv library to manage async operations and a thread pool.

## Node.js Console Module
- Global object for debugging, similar to browser console.
- Methods: `console.log()`, `console.error()`, `console.warn()`.
- Example:
```javascript
const x = 'x';
const y = 'y';
console.log(x, y);

console.log('This is the first object example');
console.log('This is the %s example', 'second object');
console.error(new Error('New Error has happened'));

const obj = 'third object';
console.warn(`This is the ${obj} example`);
```
- `console.count()`: counts label calls.
- `console.clear()`: clears console.
- `console.time()` and `console.timeEnd()`: measure execution time.
- `console.trace()`: prints call stack.

## Callback Concept
- Asynchronous, non-blocking functions.
- Essential in Node.js for handling multiple requests without waiting.
- Example:
```javascript
function processData(callback) {
  fetchData(function(err, data) {
    if (err) {
      return callback(err);
    }
    data += 1;
    callback(null, data);
  });
}
```
- Convention: callback is last parameter, first argument is error (or null).

## Global Objects
- Available in all modules without import.
- Examples: `__dirname`, `__filename`, `exports`, `module`, `require()`.
- `console` is a global object.

## Utility Modules
### OS Module
```javascript
var os = require("os");
console.log("Operating System type: " + os.type());
console.log("Platform: " + os.platform());
console.log("Total memory: " + os.totalmem() + " bytes.");
console.log("Available memory: " + os.freemem() + " bytes.");
```

### Path Module
```javascript
var path = require("path");
console.log("Resolve: " + path.resolve('path.js'));
console.log("Extension: " + path.extname('path.js'));
```

### DNS Module
```javascript
const dns = require('dns');
const website = 'www.geeksforgeeks.org';
dns.lookup(website, (err, address, family) => {
  console.log(`Address of ${website} is ${address} family: IPv${family}`);
});
```

### Net Module
```javascript
const net = require('net');
const server = net.createServer((socket) => {
  console.log('New client connected');
  socket.on('data', (data) => {
    console.log(`Received data: ${data}`);
  });
  socket.on('end', () => {
    console.log('Client disconnected');
  });
});
server.listen(3000, () => {
  console.log('Server listening on port 3000');
});
```

### Domain Module
- Intercepts unhandled errors via internal or external binding.
- Routes errors to active domain objects.

## MEAN/MERN Stack
- MEAN: MongoDB, Express, Angular, Node.js.
- MERN: MongoDB, Express, React, Node.js.
- Full-stack JavaScript development.

## Learning Objectives Recap
- Use Node.js Console Module.
- Understand Event Loop.
- Understand callbacks and their use.
- Use Global Objects.
- Use Utility Modules (OS, Path, DNS, Net, Domain).
---